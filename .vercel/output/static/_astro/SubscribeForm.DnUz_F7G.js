import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.DiEladB3.js";function g(){const[t,n]=l.useState(""),[a,r]=l.useState("idle"),[d,o]=l.useState(""),[c,m]=l.useState(!1),x=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),u=async s=>{if(s.preventDefault(),!x(t)){o("올바른 이메일 주소를 입력해주세요."),r("error");return}if(!c){o("개인정보 수집에 동의해주세요."),r("error");return}r("loading");try{const i=await fetch("/api/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})});if(i.ok)r("success");else{const p=await i.json();o(p.error||"구독 등록에 실패했습니다."),r("error")}}catch{o("네트워크 오류가 발생했습니다."),r("error")}};return a==="success"?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-5xl mb-4",children:"✉️"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"확인 이메일을 보냈어요!"}),e.jsxs("p",{className:"text-sm text-[var(--color-text-secondary)] leading-relaxed",children:[e.jsx("strong",{children:t}),"으로 확인 메일을 보냈습니다.",e.jsx("br",{}),"메일함(스팸함도!)을 확인하고 링크를 클릭해주세요."]})]}):e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold mb-1.5",children:"이메일"}),e.jsx("input",{id:"email",type:"email",value:t,onChange:s=>{n(s.target.value),r("idle")},placeholder:"hello@example.com",required:!0,className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-gray-700 bg-[var(--color-bg-light)] dark:bg-[var(--color-dark-bg)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] text-base"})]}),e.jsxs("label",{className:"flex items-start gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:s=>{m(s.target.checked),r("idle")},className:"mt-1 w-4 h-4 rounded accent-[var(--color-primary)]"}),e.jsx("span",{className:"text-xs text-[var(--color-text-secondary)] leading-relaxed",children:"개인정보(이메일) 수집·이용에 동의합니다. 뉴스레터 발송 목적으로만 사용되며, 구독 해지 시 즉시 파기됩니다."})]}),a==="error"&&e.jsx("p",{className:"text-sm text-[var(--color-wrong)] font-medium",children:d}),e.jsx("button",{type:"submit",disabled:a==="loading",className:"w-full py-3 rounded-xl bg-[var(--color-primary)] text-white font-bold text-base hover:bg-[var(--color-primary-dark)] transition-colors cursor-pointer disabled:opacity-50 min-h-[48px]",children:a==="loading"?"처리 중...":"무료로 구독하기"})]})}export{g as default};
